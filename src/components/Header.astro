---
import siteConfig from '../data/site-config';
import CustomImage from './CustomImage.astro';

const titleClass = 'header-name font-pixel text-2xl leading-tight sm:text-3xl font-semibold';
---

<header class="mx-auto mb-4 flex w-full max-w-3xl items-center gap-4 sm:mb-6">
    {
        siteConfig.avatar?.src && (
            <a href="/" class="avatar-link">
                <CustomImage
                    class="aspect-square w-24 rounded-full object-cover sm:w-[120px]"
                    {...siteConfig.avatar}
                    loading="eager"
                    fetchpriority="high"
                    width={120}
                    height={120}
                    widths={[120, 240]}
                    sizes="120px"
                />
            </a>
        )
    }
    <div class="grow">
        {
            siteConfig.avatar?.src ? (
                <p class={titleClass}>{siteConfig.title}</p>
            ) : (
                <a class={titleClass} href="/">
                    {siteConfig.title}
                </a>
            )
        }
        {siteConfig.subtitle && <p class="text-sm leading-tight sm:text-base">{siteConfig.subtitle}</p>}
    </div>
</header>

<style>
    .header-name {
        background: linear-gradient(90deg, #7b2ff7, #b829e3, #ff00ff);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    .avatar-link {
        display: block;
        border-radius: 9999px;
        padding: 3px;
        background: linear-gradient(135deg, var(--pixel-cyan), var(--pixel-magenta));
        transition: box-shadow 0.2s ease;
    }
    .avatar-link:hover {
        box-shadow: 0 0 16px var(--pixel-glow), 0 0 32px var(--pixel-glow);
    }
    .avatar-link img {
        border: 2px solid var(--bg-main);
    }
</style>
